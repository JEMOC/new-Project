<html>

<head>
  <script src="./js/angular.min.js"></script>
  <link rel="stylesheet" href="./css/index.css">
  <meta name="viewport" content="width=device-width,initial-scale=1, maximum-scale=1, user-scalable=no">
</head>

<body ng-app>
  <div class="header">
    <div class="top">
      <div class="title">
        <!-- 标题 -->
        <!-- 标题 -->
      </div>
    </div>
    <div class="container">
      <div id="more" class="iconfont">&#xe625;</div>
    </div>
    <ul id="side" class="side-nav">
      <li class="user">
        <!-- user component -->
        <a id="sign" href="javascript:;">注册</a>
        <a id="login" href="javascript:;">登录</a>
        <!-- user component -->
      </li>
      <li class="search">
        <div class="wrapper">
          <input id="search">
          <i class="iconfont" id="searchbtn">&#xe60a;</i>
        </div>
      </li>
      <li class="chat box">
        <a href="javascript:;">聊天室</a>
      </li>
      <li class="tree box">
        <a href="javascript:;">假树</a>
      </li>

    </ul>
  </div>
  <div class="section">
    <!-- main show -->
    <!-- todo something -->
    <!-- main show -->

  </div>
  <div class="footer">
    <!-- footer -->
    <!-- footer -->
  </div>
  <script type="text/javascript" src="./js/ajax.js"></script>
  <script type="text/javascript">
    window.onload = function() {
      console.log('window onloaded');
      var sign = document.getElementById('sign');
      var login = document.getElementById('login');
      var search = document.getElementById('search');
      var side = document.getElementById('side');
      var more = document.getElementById('more');
      var searchbtn = document.getElementById('searchbtn');
      sign.onclick = function() {
        ajax({
          type: 'get',
          url: 'http://localhost/users',
          data: {
            hello: 'world',
            ready: 'ok'
          },
          success: function(data) {
            console.log(data);
          }
        });
      }

      login.onclick = function() {
        ajax({
          type: 'post',
          url: 'http://localhost/users',
          data: {
            hello: 'world',
            ready: 'ok'
          }
        });
      }
    }

    search.addEventListener('focus', function() {
      search.parentNode.classList.add('focus');
      document.removeEventListener('click',show);
    });

    search.addEventListener('blur', function() {
      search.parentNode.classList.remove('focus');
      document.addEventListener('click', show);
    });

    more.addEventListener('click', function() {
      side.style.transform = 'translateX(0)';
      document.addEventListener('click', show);
    });

    var show = function(event) {
      if (event.target != side && event.target != more && event.target != searchbtn ) {
        console.log('click');
        if (document.body.clientWidth <= 768 ) {
          side.style.transform = 'translateX(-100%)';
        }else{
          side.style.transform = 'translateX(0)';
        }
      }
    }



  </script>
</body>

</html>
